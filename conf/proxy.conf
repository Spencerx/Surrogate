{mode,master}.

{role,listener}.

%% Hosts that have one of these addresses can bring up IP aliases from bindaliases
{bindgroup,[{ip,{192,168,19,41}}]}.

%% Addresses to be configured on alias interfaces.
{bindaliases,[{ip,{192,168,19,46}},{ip,{192,168,19,47}}]}.

{listeners,[
			{proxy_socks45,{ip,{0,0,0,0}},1080,[
							{proxy_filters,[filter_host]},
							{stream_filters,[filter_force_chunk]}
							]},
			{proxy_transparent,{ip,{0,0,0,0}},3128,[
							enable_gzip,	
							{worker_pool,testing},	
							{proxy_filters,[filter_host]},
							{stream_filters,[filter_auth_basic]},
							%% ,filter_force_chunk,filter_headers,filter_icap
							{filter_headers,[{add,"X-modified-by: Surrogate"}]},
							%% {filter_headers,[xforwardfor,{add,"X-modified-by: Surrogate"},{remove,"Accept-Charset"}]},
							%% ,filter_icap
							{proxy_auth,true}					
							]},
			{http_management_api,{ip,{0,0,0,0}},8181,[{server_admin,"skruger@fastinfra.com"},{noproperty,"invalid setting"},{server_name,"localhost"}]}
			%%,{rest_rpc,{ip,{0,0,0,0}},8282,[]}
%			{balance_http,{ip,{0,0,0,0}},8080,[
%					{pool,poolname},
%					{backend_port,80},
%					{stream_filters,[filter_headers]},
%					{filter_headers,[xforwardfor,{add,"X-SSL: True"}]}
%					]}
%					,
%			{balance_http,{ip,{0,0,0,0}},8081,[
%					%% {proxy_host,{{192,168,19,58},80}},
%					{proxy_host,{"crow.shaunkruger.com",80}},
%					{stream_filters,[filter_headers]},
%					{filter_headers,[xforwardfor,{add,"X-SSL: True"}]}
%					]}
%					,
%			{balance_https,{ip,{0,0,0,0}},8443,
%						"Surrogate/conf/fastinfra.key",
%						"Surrogate/conf/fastinfra.crt",
%						
%				    [
%					{pool,poolname},
%					{backend_port,80},
%					{stream_filters,[filter_headers]},
%					{filter_headers,[xforwardfor,{add,"X-SSL: True"}]}
%					]},
			]}.

{start_filters,[filter_host]}.

{auth_mode,mnesia}.
%{auth_mode,mysql}.

% {mysql_conn,{ Host, Port, User, Pass, Database }}.
%{mysql_conn,{"localhost",3306, "surrogate", "spass", "surrogate"}}.

{log_level, 4}.

{filter_host,[
		{deny_hosts,"Surrogate/conf/DenyHosts.txt"},
		{deny_urls,"Surrogate/conf/DenyUrl.txt"}
		]}.


{balance_hosts,[
		{hosts,
			[{192,168,19,41},{192,168,19,42}]
			},
		{healthcheck,ping}
		]}.

{balance_pools,[
		{poolname,balance_round_robin,[
				{host,{192,168,19,58}},
				{host,{192,168,19,58}}
			   ]}
		]}.

			
%			{balance_raw,{192,168,19,41},3306,[
%					{pool,pool2}
%					]}
			
