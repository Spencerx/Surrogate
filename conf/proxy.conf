{listeners,[
%			{proxy_socks45,{ip,"::"},1080,[
%							{proxy_filters,[filter_host]},
%							{stream_filters,[filter_force_chunk]}
%							]},
			{proxy_http,{ip,"0.0.0.0"},3128,[
							inet6,
							enable_gzip,	
							{worker_pool,testing},	
							{stream_filters,[filter_force_chunk,filter_auth_basic,filter_headers,mod_forward_proxy]},
							%% ,filter_force_chunk,filter_icap
							{filter_headers,[{add,"X-modified-by: Surrogate"}]},
							{proxy_auth,true}					
							]}
							,
			{proxy_http,{ip,"::"},8088,[
					inet,
					%{proxy_host,{{ip,{192,168,19,71}},80}},
					{pool,localpool},
					{pool_retries,2},
					{backend_port,80},
					{stream_filters,[filter_headers]},
					{filter_headers,[xforwardfor]}
					]}
					,
			{proxy_https,{ip,"::"},8089,[
					{keyfile,"/home/skruger/erlang/workspace/Surrogate/conf/fastinfra.key"},
					{certfile,"/home/skruger/erlang/workspace/Surrogate/conf/fastinfra.crt"},
					%{proxy_host,{{ip,{192,168,19,58}},80}},
					{pool,localpool},
					{backend_port,80},
					{stream_filters,[filter_headers]},
					{filter_headers,[xforwardfor]}
					]}
			]}.

{modules,[  %% Modules implementing proxy_mod behaviour will be started and stopped.
	{mod_mysql,[{sql_auth,"localhost",3306, "surrogate", "spass", "surrogate"}]},
	{proxy_auth,[
				{default_auth,mnesia} %% This is the default setting.
				%%{default_auth,{mysql,sql_auth}}
				]},
				%% {mysql,ConnName} must have ConnName in mod_mysql connection list.
	{mod_worker,[{manager_nodes,[]}
	%				,{pools,[testing]}
				]},
	{mod_worker_manager,[{pools,[testing]}]},
	{mod_cluster,[
		{ifconfig_script,"sudo /sbin/ifconfig"},
		{ip_script,"sudo /sbin/ip"},
		{listen_interface,"eth1"},
		{quorum,1}
		]},
	{mod_balance,[
		{localpool,balance_round_robin,[
				{hosts,[
					{192,168,19,58}
					
%					{192,168,19,81},
%					{192,168,19,82},
%					{192,168,19,83},
%					{192,168,19,84},
%					{192,168,19,85}
					]},
				{checks,[
%%					{healthcheck_ping,[]}
					{healthcheck_tcp,[{port,80}]}
					]}
			   ]}
		]}
	]}.

{log_level, 4}.

%{balance_pools,[
%		{localpool,balance_round_robin,[
%				{host,{192,168,19,81}},
%				{host,{192,168,19,82}},
%				{host,{192,168,19,83}},
%				{host,{192,168,19,84}},
%				{host,{192,168,19,85}}
%			   ]}
%		]}.


